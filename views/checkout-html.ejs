<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout Page</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="checkout-css.css">
</head>
<body>
  <div class="container mt-5">
    <h2 class="text-center mb-4">Checkout</h2>
    <form action="/pay-for-order" method="post">
    <!-- Contact Details Section -->
    <div class="card mb-3">
      <div class="card-header">
        <h5 class="mb-0">
          <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#contactDetails">
            Contact Details
          </button>
        </h5>
      </div>
      <div id="contactDetails" class="collapse">
        <div class="card-body">
          <!-- <form id="contactForm"> -->
            <div class="form-group">
              <label for="email">Email:</label>
              <input type="email" class="form-control" id="email" name="email" value="<%= userData._id %>">
            </div>
            <div class="form-group">
              <label for="phone">Phone:</label>
              <input type="tel" class="form-control" id="phone" name="phone" value="<%= userData.phone_number %>">
            </div>
          <!-- </form> -->
        </div>
      </div>
    </div>
    
    <!-- Delivery Details Section -->
    <div class="card mb-3">
      <div class="card-header">
        <h5 class="mb-0">
          <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#deliveryDetails">
            Delivery Details
          </button>
        </h5>
      </div>
      <div id="deliveryDetails" class="collapse">
        <div class="card-body">
          <!-- <form id="deliveryForm"> -->
            <div class="form-group">
              <label for="address">Address:</label>
              <input type="text" class="form-control" id="address" name="address" value="<%= userData.address %>">
            </div>
            <div class="form-group">
              <label for="postalCode">Postal Code:</label>
              <input type="text" class="form-control" id="postalCode" name="postalCode" value="12345">
            </div>
            <div class="form-group">
              <label for="city">City:</label>
              <input type="text" class="form-control" id="city" name="city" value="City">
            </div>
            <div class="form-group">
              <label for="country">Country:</label>
              <input type="text" class="form-control" id="country" name="country" value="Country">
            </div>
          <!-- </form> -->
        </div>
      </div>
    </div>
    
    <!-- Payment Details Section -->
    <div class="card mb-3">
      <div class="card-header">
        <h5 class="mb-0">
          <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#paymentDetails">
            Payment Details
          </button>
        </h5>
      </div>
      <div id="paymentDetails" class="collapse">
        <div class="card-body">
          <!-- <form id="paymentForm"> -->
            <div class="form-group">
              <label for="cardNumber">Card Number:</label>
              <input type="text" class="form-control" id="cardNumber" name="cardNumber" value="4111111111111111">
            </div>
            <div class="form-group">
              <label for="expiryDate">Expiry Date:</label>
              <input type="text" class="form-control" id="expiryDate" name="expiryDate" value="12/24">
            </div>
            <div class="form-group">
              <label for="cvv">CVV:</label>
              <input type="text" class="form-control" id="cvv" name="cvv" value="123">
            </div>
          <!-- </form> -->
        </div>
      </div>
    </div>
    
    <!-- Order Summary and Confirmation -->
    
    <!-- <div class="card">
      <div class="card-header">
        <h5 class="mb-0">
          Order Summary
        </h5>
      </div>
      <div class="card-body">
        <p>Item: Example Product</p>
        <p>Quantity: 1</p>
        <p>Total: $100.00</p>
        <button class="btn btn-dark btn-block" id="confirmOrder">Confirm and Pay</button>
      </div>
    </div> -->
    <div id="orderSummary">
      <div class="card mb-3">
        <div class="card-header">
          <h5 class="mb-0">Order Summary</h5>
        </div>
        <div class="card-body">
          <% let subtotal = 0; %>
          <% let vat = 110/100 %>
          <% for (let i = 0; i < itemQty.length; i++) { %>
            <div class="item-card mb-3">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Item: <%= cartList[i].name %></h5>
                  <p>Unit Price: <%= cartList[i].price.toFixed(2) %></p>
                  <p>Quantity: <%= itemQty[i] %></p>
                  <p>Price: $<%= (itemQty[i] * cartList[i].price).toFixed(2) %></p>
                 
                </div>
              </div>
            </div>
          <% } %>
          <!-- <div class="item-card mb-3">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Item: Example Product 2</h5>
                <p>Unit Price: $25.00</p>
                <p>Quantity: 2</p>
                <p>Total Price: $50.00</p>
              </div>
            </div>
          </div> -->
          <hr>
          <% for (let i = 0; i < itemQty.length; i++) { %>
            <% subtotal += itemQty[i] * cartList[i].price; %>
          <% } %>
          <p>Subtotal:  <%= subtotal.toFixed(2) %></p>
          <p>VAT (10%): $10.00</p>
          <p><strong>Total: $ <%= (subtotal * vat).toFixed(2)  %></strong></p>
          <button class="btn btn-dark btn-block" id="confirmOrder">Confirm and Pay</button>
        </div>
      </div>
    </div>
</form>
  </div>
  
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="checkout-js.js"></script>
</body>
</html>
