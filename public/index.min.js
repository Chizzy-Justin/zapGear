var text,checkoutProducts,currentYear=(new Date).getFullYear();document.getElementById("copyright").textContent=currentYear;var cartList=[],cartListBtnIdList=[],itemQty=[];const urlParams=new URLSearchParams(window.location.search),message=urlParams.get("message"),success=urlParams.get("success");if(message){console.log("not done");const alertElement=document.createElement("div");alertElement.textContent=message,alertElement.classList.add("alert-message"),console.log("almost done");const body=document.getElementById("main-container");body.insertBefore(alertElement,body.firstChild),console.log("done"),setTimeout((()=>{alertElement.remove()}),3e3)}if(success){const alertElement=document.createElement("div");alertElement.textContent=success,alertElement.classList.add("alert-success");const body=document.body;body.insertBefore(alertElement,body.firstChild),setTimeout((()=>{alertElement.remove()}),3e3)}function sendCart(){var storedCartList=localStorage.getItem("cartList"),storedCartListBtnIdList=localStorage.getItem("cartListBtnIdList"),storedItemQty=localStorage.getItem("itemQty");null!==storedCartList&&null!==storedCartListBtnIdList&&null!==storedItemQty?(cartList=JSON.parse(storedCartList),cartListBtnIdList=JSON.parse(storedCartListBtnIdList),itemQty=JSON.parse(storedItemQty),cartListBtnIdList.forEach((id=>{var element=document.getElementById("product"+id);element&&(element.disabled=!0,element.innerHTML="Already Added!")})),document.getElementById("cartListInput").value=JSON.stringify(cartList),document.getElementById("cartListBtnIdListInput").value=JSON.stringify(cartListBtnIdList),document.getElementById("itemQtyInput").value=JSON.stringify(itemQty),document.getElementById("signupForm").submit(),console.log("Stored cartList:",cartList),console.log("Stored cartListBtnIdList:",cartListBtnIdList),console.log("Stored itemQty:",itemQty)):console.log("No stored data found or some data is missing.")}function saveUserDataToServer(){if(console.log("triggr"),document.getElementById("useremail")){const useremail=document.getElementById("useremail").innerHTML;console.log("triggr",useremail),""!==useremail&&null!==useremail&&fetch("/save-user-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({useremail:useremail,cartList:cartList,cartListBtnIdList:cartListBtnIdList,itemQty:itemQty})}).then((response=>{if(!response.ok)throw new Error("Network response was not ok.");return response.json()})).then((data=>{console.log("Data saved successfully:",data)})).catch((error=>{console.error("Error saving data:",error)}))}}window.onload=function(){var storedCartList=localStorage.getItem("cartList"),storedCartListBtnIdList=localStorage.getItem("cartListBtnIdList"),storedItemQty=localStorage.getItem("itemQty");null!==storedCartList&&null!==storedCartListBtnIdList&&null!==storedItemQty?(cartList=JSON.parse(storedCartList),cartListBtnIdList=JSON.parse(storedCartListBtnIdList),itemQty=JSON.parse(storedItemQty),cartListBtnIdList.forEach((id=>{var element=document.getElementById("product"+id);element&&(element.disabled=!0,element.innerHTML="Already Added!")})),console.log("Stored cartList:",cartList),console.log("Stored cartListBtnIdList:",cartListBtnIdList),console.log("Stored itemQty:",itemQty)):console.log("No stored data found or some data is missing.")},window.addEventListener("pageshow",(function(event){if(event.persisted){var storedCartList=localStorage.getItem("cartList"),storedCartListBtnIdList=localStorage.getItem("cartListBtnIdList"),storedItemQty=localStorage.getItem("itemQty");null!==storedCartList&&null!==storedCartListBtnIdList&&null!==storedItemQty?(cartList=JSON.parse(storedCartList),cartListBtnIdList=JSON.parse(storedCartListBtnIdList),itemQty=JSON.parse(storedItemQty),cartListBtnIdList.forEach((id=>{document.getElementById("product"+id).disabled=!0,document.getElementById("product"+id).innerHTML="Already Added!"})),console.log("Stored cache cartList:",cartList),console.log("Stored cache cartListBtnIdList:",cartListBtnIdList),console.log("Stored cache itemQty:",itemQty)):console.log("No stored data found or some data is missing.")}}));class Cart{constructor(price,qty,name,img,id,description){this.price=price,this.qty=qty,this.name=name,this.img=img,this.id=id,this.description=description}}function addToCart(price,qty,name,img,id,description){let cartItem=new Cart(price,qty,name,img,id,description);cartList.push(cartItem),console.log(cartList[cartList.length-1]),cartListBtnIdList.push(id),document.getElementById("product"+id).disabled=!0,document.getElementById("product"+id).innerHTML="Already Added!",console.log(cartList.length+"and id is "+id),itemQty.push(qty),localStorage.setItem("cartList",JSON.stringify(cartList)),localStorage.setItem("cartListBtnIdList",JSON.stringify(cartListBtnIdList)),localStorage.setItem("itemQty",JSON.stringify(itemQty)),saveUserDataToServer()}function addToItemCart(productId){var xhr=new XMLHttpRequest;xhr.open("GET","/addProductToCart?productId="+productId,!0),xhr.onreadystatechange=function(){if(4===xhr.readyState&&200===xhr.status){var product=JSON.parse(xhr.responseText);addToCart(product.productPrice,1,product.productName,product.productImage,product._id,product.productDescription)}},xhr.send()}function viewCart(){for(document.getElementById("xx").innerHTML="",document.getElementById("checkout-products").innerHTML="",1==cartList.length?(document.getElementById("numberOfItems").innerHTML=cartList.length+" item",console.log("new length "+cartList.length)):0==cartList.length?(document.getElementById("numberOfItems").innerHTML="Cart is empty",console.log("new length "+cartList.length)):(document.getElementById("numberOfItems").innerHTML=cartList.length+" items",console.log("new length "+cartList.length)),i=0;i<cartList.length;i++)console.log(Number(cartList[i].price)),text='<div class="card border-0"><div class="row "><div class="col-4 cart-picture"><img src="'+cartList[i].img+'" class="cart-pic-img" alt="'+cartList[i].name+'"></div><div class="col-8"><h6>'+cartList[i].name+"</h6><h6>&#x20A6 <span>"+cartList[i].price*itemQty[i]+'</span></h6><a class="colored-border" onclick="reduce('+i+')">-</a><span id="item-count'+i+'" class="item-qty">'+itemQty[i]+'</span><a class="colored-border" onclick="increase('+i+')">+</a><iconify-icon icon="la:trash-alt-solid" id="remove" onclick="deleteCartItem('+i+')"></iconify-icon> </div>    <hr class="mt-2"> </div></div>',checkoutProducts='<div class="row"><div class="col-6"><p>'+cartList[i].name+'</p></div><div class="col-6"><h6>&#x20A6 <span>'+cartList[i].price*itemQty[i]+"</span></h6></div></div>",document.getElementById("checkout-products").innerHTML+=checkoutProducts,document.getElementById("xx").innerHTML+=text;updatePrices()}function reduce(i){var itemCount=document.getElementById("item-count"+i).innerHTML;console.log("reduce "+itemCount),1==itemCount?(deleteCartItem(i),updatePrices()):(itemQty[i]=itemQty[i]-1,localStorage.setItem("itemQty",JSON.stringify(itemQty)),saveUserDataToServer(),viewCart())}function increase(i){var itemCount=document.getElementById("item-count"+i).innerHTML;itemQty[i]=itemQty[i]+1,localStorage.setItem("itemQty",JSON.stringify(itemQty)),console.log("increase "+itemCount),saveUserDataToServer(),viewCart()}function updatePrices(){var subTotals=0;for(i=0;i<cartList.length;i++){subTotals+=Number(cartList[i].price)*itemQty[i],document.getElementById("subTotal").innerHTML=subTotals.toFixed(2);var Total=1.1*subTotals;document.getElementById("Total").innerHTML=Total.toFixed(2);var vatPrice=Total-subTotals;document.getElementById("vatsPrice").innerHTML=vatPrice.toFixed(2)}}function onClearCartClicked(){document.getElementById("xx").innerHTML="",document.getElementById("checkout-products").innerHTML="",document.getElementById("numberOfItems").innerHTML="Cart is empty",document.getElementById("subTotal").innerHTML=0,document.getElementById("Total").innerHTML=0,document.getElementById("vatsPrice").innerHTML=0,cartListBtnIdList.forEach((btnId=>{document.getElementById("product"+btnId).disabled=!1,document.getElementById("product"+btnId).innerHTML="Add To Cart"})),cartList=[],cartListBtnIdList=[],itemQty=[],localStorage.setItem("cartList",JSON.stringify(cartList)),localStorage.setItem("cartListBtnIdList",JSON.stringify(cartListBtnIdList)),localStorage.setItem("itemQty",JSON.stringify(itemQty)),saveUserDataToServer()}var btnId;function deleteCartItem(index){cartList.splice(index,1),itemQty.splice(index,1),btnId=cartListBtnIdList[index],console.log(btnId+" and "+index+" and "+cartListBtnIdList[index]),document.getElementById("product"+btnId).disabled=!1,document.getElementById("product"+btnId).innerHTML="Add To Cart",cartListBtnIdList.splice(index,1),localStorage.setItem("cartList",JSON.stringify(cartList)),localStorage.setItem("cartListBtnIdList",JSON.stringify(cartListBtnIdList)),localStorage.setItem("itemQty",JSON.stringify(itemQty)),saveUserDataToServer(),viewCart(),0==cartList.length&&onClearCartClicked()}function clearCart(){for(xy=0;xy<cartListBtnIdList.length;xy++)document.getElementById(cartListBtnIdList[xy]).disabled=!1,document.getElementById("product"+cartListBtnIdList[xy]).innerHTML="Add To Cart";cartList.splice(0,cartList.length),cartList.length=0,itemQty=[],viewCart(),onClearCartClicked()}function passProductId(productId){window.location.href="/productPage?id="+productId,console.log("image clicked")}const userDataElement=document.getElementById("userData"),userDataString=userDataElement.value,userData=JSON.parse(userDataString);""!==userDataString&&(localStorage.setItem("cartList",JSON.stringify(userData.cartList)),localStorage.setItem("cartListBtnIdList",JSON.stringify(userData.cartListBtnIdList)),localStorage.setItem("itemQty",JSON.stringify(userData.itemQty))),document.getElementById("signupForm").addEventListener("submit",(function(event){this.checkValidity()||(event.preventDefault(),event.stopPropagation()),this.classList.add("was-validated")})),document.querySelector(".passShowHide").addEventListener("click",(function(){const passwordInput=document.getElementById("signupPassword");"password"===passwordInput.type?passwordInput.type="text":passwordInput.type="password",this.textContent="password"===passwordInput.type?"Show":"Hide"}));