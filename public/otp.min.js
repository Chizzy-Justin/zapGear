const resendButton=document.getElementById("resend-otp"),resendTimer=document.getElementById("resend-timer"),otpFields=document.querySelectorAll(".otp-input"),verifyButton=document.getElementById("verify-otp");let intervalId,timerCount=60;function startTimer(){intervalId=setInterval((()=>{timerCount--,resendTimer.textContent=timerCount,0===timerCount&&(clearInterval(intervalId),resendButton.classList.remove("disabled"),resendButton.disabled=!1)}),1e3)}otpFields[0].focus(),otpFields.forEach(((field,index)=>{field.addEventListener("input",(()=>{1===field.value.length?index<otpFields.length-1?otpFields[index+1].focus():verifyButton.focus():0===field.value.length&&index>0&&otpFields[index-1].focus()})),field.addEventListener("paste",(event=>{event.preventDefault();const pastedText=event.clipboardData.getData("text");pastedText.length===otpFields.length&&otpFields.forEach(((otpField,idx)=>{otpField.value=pastedText[idx],idx<otpFields.length-1&&otpFields[idx+1].focus()}))}))})),resendButton.addEventListener("click",(()=>{const data={email:document.getElementById("email").value,password:document.getElementById("password").value,address:document.getElementById("address").value,zipCode:document.getElementById("zipCode").value,state:document.getElementById("state").value,country:document.getElementById("country").value,phoneNumber:document.getElementById("phoneNumber").value,isLoggedIn:document.getElementById("isLoggedIn").value,firstName:document.getElementById("firstName").value,lastName:document.getElementById("lastName").value,cartList:JSON.parse(document.getElementById("cartList").value),cartListBtnIdList:JSON.parse(document.getElementById("cartListBtnIdList").value),itemQty:JSON.parse(document.getElementById("itemQty").value),hashedOtp:document.getElementById("hashedOtp").value};clearInterval(intervalId),otpFields.forEach((field=>{field.value=""})),resendButton.classList.add("disabled"),resendButton.disabled=!0,setTimeout((()=>{resendButton.classList.remove("disabled"),resendButton.disabled=!1}),6e4),timerCount=60,resendTimer.textContent=timerCount,startTimer(),fetch("/resend-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)}).then((response=>response.json())).then((data=>console.log("Success:",data))).catch((error=>console.error("Error:",error)))})),startTimer();